# frozen_string_literal: true

require_relative '../lib/board'

describe Board do
  let(:'ğŸŸ ') { described_class.new }
  let(:'ğŸ”µ') { described_class.new }

  describe '#update_board' do
    subject(:board_new) { described_class.new }

    context 'update the first row and first column with ğŸŸ ' do
      before do
        board_new.update_board(0, 0, 'ğŸŸ ')
      end

      it 'update cell' do
        board = board_new.instance_variable_get(:@board)
        update = board[0][0]
        expect(update).to eq('ğŸŸ ')
      end
    end

    context 'update the fifth row and the fith column with ğŸ”µ ' do
      before do
        board_new.update_board(4, 5, 'ğŸ”µ')
      end

      it 'update cell' do
        board = board_new.instance_variable_get(:@board)
        update = board[4][5]
        expect(update).to eq('ğŸ”µ')
      end
    end
  end

  describe '#horizontal_check' do
    subject(:check) { described_class.new }

    context 'Check if horizontal check return true ' do
      before do
        check.update_board(3, 3, 'ğŸŸ ')
        check.update_board(3, 4, 'ğŸŸ ')
        check.update_board(3, 5, 'ğŸŸ ')
        check.update_board(3, 6, 'ğŸŸ ')
      end

      it 'Check True' do
        board = check.horizontal_check?('ğŸŸ ')
        expect(board).to eq(true)
      end

      it 'Check false' do
        board = check.horizontal_check?('ğŸ”µ')
        expect(board).to eq(false)
      end
    end

    describe 'Check random places' do
      subject(:check) { described_class.new }

      context 'Should return false' do
        before do
          check.update_board(0, 0, 'ğŸŸ ')
          check.update_board(1, 1, 'ğŸŸ ')
          check.update_board(5, 2, 'ğŸŸ ')
          check.update_board(2, 3, 'ğŸŸ ')
        end
        it 'is false?' do
          board = check.horizontal_check?('ğŸŸ ')
          expect(board).to eq(false)
        end
      end
    end
  end

  describe '#vertical_check?' do
    subject(:check) { described_class.new }

    context 'Four colors in a column' do
      before do
        check.update_board(0, 0, 'ğŸŸ ')
        check.update_board(1, 0, 'ğŸŸ ')
        check.update_board(2, 0, 'ğŸŸ ')
        check.update_board(3, 0, 'ğŸŸ ')
      end
      it 'Should return true' do
        board = check.vertical_check?('ğŸŸ ')
        expect(board).to eq(true)
      end

      context 'Check ğŸ”µ in a column' do
        it 'Return false' do
          board = check.vertical_check?('ğŸ”µ')
          expect(board).to eq(false)
        end
      end
    end

    context 'Three colors in a column' do
      before do
        check.update_board(0, 0, 'ğŸŸ ')
        check.update_board(1, 0, 'ğŸ”µ')
        check.update_board(2, 0, 'ğŸŸ ')
        check.update_board(3, 0, 'ğŸ”µ')
        check.update_board(5, 0, 'ğŸŸ ')
      end
      it 'Return false' do
        board = check.vertical_check?('ğŸŸ ')
        expect(board).to eq(false)
      end
    end
  end
end
